<!DOCTYPE html>
<!-- so autoplay sounds does not work as advertised so we need to
find a way to have a universal trigger when entering a scene ?
some kind of button that disapears after a click event

 <- X  /Y\  Z

-->
<html>
  <head>
    <meta charset="utf-8">
    <title>Interaction</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- So sound is handled by internal events not the events component FFS-->
<!-- will this work to let sound play ? -->





    <script>
    AFRAME.registerComponent('play', {
      init: function () {
          var myEl = document.querySelector('#yellow');
          this.el.addEventListener('click', function () {
            myEl.components.sound.playSound();
          });
        }
    });

    AFRAME.registerComponent('stop', {
      init: function () {
          var myEl = document.querySelector('#yellow');
          this.el.addEventListener('click', function () {
            myEl.components.sound.stopSound();
          });
        }
    });
    </script>

    <script>
    window.onload = function() {
      var context = new AudioContext();
    }
    </script>


  </head>


  <body>
<!-- CODE FOR PLAY SOUND BUTTON -->
<!--   no now there is no way to click the button because of the VR scene-->
<script>
  function PlayVanish(btn) {
    document.getElementsByTagName('audio')[0].play();
    btn.style.display='none';
}
</script>

  <button id = 'easy_click' onclick="PlayVanish(this)"> ENABLE SOUND</button>
    <audio preload="auto"  src="blank.mp3"></audio>

<!-- PLAY SOUND CODE END -->

<!-- embed code style -->
<style>
  #myEmbeddedScene {
    width:100%;
    height:600px;
  }
</style>


<div id="myEmbeddedScene">
<a-scene background="color: #ECECEC" embedded>
  <!--  <a-scene> -->
      <!-- Assets go here for preload -->
      <a-assets>  <!-- put the things we need in here -->
        <audio id="noise" src="loop.wav" preload="auto"></audio>
        <audio id="muzak" src="muzakLoop.mp3" preload="auto"></audio>
      </a-assets>

      <!-- place a camera and cursor -->
      <a-entity position="0 0 7">
        <a-camera>
          <a-cursor></a-cursor>
        </a-camera>
      </a-entity>

<!-- Colum in blue - red and green spheres and a yellow box -->
      <!-- Blue cylinder ------------>
      <a-cylinder position="-2  2.5 0"
                  height="5"
                  color="#0000bb"
                  sound="src: #muzak;
                  volume:1;
                  on: click" >
     </a-cylinder>

     <!-- yellow Box -->
        <a-box ID="yellow" position="1.5 0.5 0.5 " color="yellow" sound="src:#noise">
               <!-- PLAY -->
               <a-sphere radius="0.25" position="-0.5 1 0" color="green" play></a-sphere>
               <!-- STOP -->
               <a-sphere radius="0.25" position=" 0.5 1 0" color="red" stop > </a-sphere>

        </a-box>


    </a-scene>
    </div>

  </body>
</html>
